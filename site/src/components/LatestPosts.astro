---
import {getSanityContent} from 'utils:helpers';
import latestPostsQuery from 'sanityQL:latestPosts';
import BlogCard from 'component:BlogCard';

const response = await getSanityContent({query: latestPostsQuery});
const posts = response.allPost;
---
<section>
  <div class="latest-posts">
    <h2>Latest <span>Posts</span></h2>
    <ul>
      {posts.map((p) => <BlogCard post={p} />)}
    </ul>
    <a class="all" href="/blog" title="See all posts"
      >See all posts</a>
  </div>
</section>

<style lang="scss" >
section {
  .latest-posts {
    @apply flex flex-col justify-center items-center;
    @apply mx-auto;
    @apply py-12 px-8;
    @apply w-full;
    @apply lg:max-w-4xl xl:max-w-6xl;
    @apply text-base;

    @apply text-darkPurple;

    h2 {
      @apply flex items-center;
      @apply font-cairo font-bold uppercase;
      @apply text-3xl md:text-4xl;
      span {
        @apply flex;
        @apply ml-1;
        @apply py-0 px-2;
        @apply text-white;
        @apply bg-blue-500;
      }
    }

    ul {
      @apply mt-12;
      @apply grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-8;
      @apply list-none;

      li {
        @apply h-full;

        &:not(:nth-child(-n + 2)) {
          @apply hidden;
        }

        @screen sm {
          &:not(:nth-child(-n + 2)) {
            @apply block;
          }
          &:not(:nth-child(-n + 4)) {
            @apply hidden;
            @apply xl:block;
          }
        }
      }
    }

    .all {
      @apply font-bold uppercase;
      @apply bg-darkPurple;
      @apply text-white;
      @apply py-3 px-5;
      @apply mt-12;
      @apply rounded-md;

      &:hover {
        @apply bg-blue-500 ;
      }
    }
  }
}

body.dark {
  section {
    .latest-posts {
      @apply text-white;

      h2 {
        span {
          @apply text-darkPurple;
          @apply bg-bbbblue;
        }
      }
      .all {
        @apply font-bold uppercase;
        @apply bg-gray-200;
        @apply text-darkPurple;
      
        &:hover {
          @apply bg-bbbpink;
        }
      }
    }
  }
}
</style>
